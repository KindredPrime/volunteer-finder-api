DROP TABLE IF EXISTS org_tags;
DROP TABLE IF EXISTS org_causes;
DROP TABLE IF EXISTS organizations;
DROP TABLE IF EXISTS users;

CREATE TABLE users (
  id INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
  email TEXT NOT NULL,
  username TEXT NOT NULL
);

CREATE TABLE organizations (
  id INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
  org_name TEXT NOT NULL,
  website TEXT DEFAULT 'Not Available' NOT NULL,
  phone TEXT DEFAULT 'Not Available' NOT NULL,
  email TEXT DEFAULT 'Not Available' NOT NULL,
  org_address TEXT DEFAULT 'Not Available' NOT NULL,
  org_desc TEXT NOT NULL,
  creator INTEGER REFERENCES users(id) ON DELETE SET NULL
);

DROP TABLE IF EXISTS causes;
CREATE TABLE causes (
  id INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
  cause_name TEXT NOT NULL
);

CREATE TABLE org_causes (
  org_id INTEGER REFERENCES organizations(id) ON DELETE CASCADE NOT NULL,
  cause_id INTEGER REFERENCES causes(id) ON DELETE CASCADE NOT NULL,
  PRIMARY KEY (org_id, cause_id)
);

DROP TABLE IF EXISTS tags;
CREATE TABLE tags (
  id INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
  tag_name TEXT NOT NULL
);

CREATE TABLE org_tags (
  org_id INTEGER REFERENCES organizations(id) ON DELETE CASCADE NOT NULL,
  tag_id INTEGER REFERENCES tags(id) ON DELETE CASCADE NOT NULL,
  PRIMARY KEY (org_id, tag_id)
);